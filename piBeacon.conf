#!/bin/bash

formatHex() { sed -e 's/-//g' -e 's/\(..\)/\1 /g'; }

export BLUETOOTH_DEVICE=${BLUETOOTH_DEVICE:-"hci0"}
export DEVICE_NAME="piBeacon"

### Advertising Data

# Adversiting format
#
#   iBeacon
#   AltBeacon
#   Name

AdvertisingFormat="iBeacon"

# Company identifier (little endian)
#
#   Substitute your assigned manufacturer code, if available.
#   More info:
#     https://www.bluetooth.org/en-us/specification/assigned-numbers/company-identifiers
#
#   Examples:
#     Apple, Inc.		0x004C		"4c 00"
#     Radius Networks, Inc.	0x0118		"18 01"

export AD_Data_Company_Identifier="4c 00"


# Region unique identifier
# Generated by command 'uuidgen'

export UUID="E2C56DB5-DFFB-48D2-B060-D0F5A71096E0"

# Major and minor
#
#  Range: 0 to 65535

export MAJOR=34012 # 0x84DC
export MINOR=5 # 0x0005


# Transmission power level
#
#   Range: -127 to +127dBm
#   Note: when the TX Power Level tag is not present, the TX power level of the packet is unknown.

export POWER="-55" # -55dBm = 0xC9


### Advertising Parameters

# Advertising interval (min, max) (little endian)
#
#   Minimum and maximum advertising interval for non-directed advertising.
#   Time = N * 0.625 msec
#
#   Range: 0x0020 ("00 20", 20ms) to 0x4000 ("00 20", 10.24 sec)
#   Default: 0x0800 ("00 08", 1.28 second)

export ADV_INTERV_MIN="A0 00"
export ADV_INTERV_MAX="A0 00"


# Advertising type
#
#   0x00 Connectable undirected advertising (ADV_IND) (default)
#   0x01 Connectable directed advertising (ADV_DIRECT_IND)
#   0x02 Scannable undirected advertising (ADV_SCAN_IND)
#   0x03 Non connectable undirected advertising (ADV_NONCONN_IND)

export ADV_TYPE="03"


# Own address type
#
#   0x00 Public Device Address (default)
#   0x01 Random Device Address

export OWN_ADDR_TYPE="00"


# Direct address type
#
#   0x00 Public Device Address (default)
#   0x01 Random Device Address

export DIR_ADDR_TYPE="00"


# Direct address
#
#   Public Device Address or Random Device Address of the device to be connected

export DIR_ADDR="00 00 00 00 00 00"


# Advertising channel map
#
#   00000000b Reserved for future use
#   xxxxxxx1b Enable channel 37 use
#   xxxxxx1xb Enable channel 38 use
#   xxxxx1xxb Enable channel 39 use
#   00000111b Default (all channels enabled)

export ADV_CHAN_MAP="07"


# Adversiting filter policy
#
#   0x00 Allow Scan Request from Any, Allow Connect Request from Any (default).
#   0x01 Allow Scan Request from White List Only, Allow Connect Request from Any.
#   0x02 Allow Scan Request from Any, Allow Connect Request from White List Only.
#   0x03 Allow Scan Request from White List Only, Allow Connect Request from
#        White List Only.

export ADV_FILT_POL="00"

